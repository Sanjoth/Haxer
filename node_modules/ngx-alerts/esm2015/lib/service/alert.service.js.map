{
  "version": 3,
  "file": "alert.service.js",
  "sources": [
    "ng://ngx-alerts/projects/ngx-alerts/src/lib/service/alert.service.ts"
  ],
  "sourcesContent": [
    "import {Inject, Injectable} from '@angular/core';\nimport {Alert} from '../model/alert.model';\nimport {BehaviorSubject, Observable, Subject, timer} from 'rxjs';\nimport {ALERT_CONFIG} from '../alert.config';\nimport {AlertConfig} from '../model/alert-config.model';\nimport {scan, take} from 'rxjs/internal/operators';\n\n@Injectable()\nexport class AlertService {\n\n  private dispatcher = new Subject<{ type: 'ADD' | 'DELETE', alert: Alert, config: AlertConfig }>();\n  private state = new BehaviorSubject<Alert[]>([]);\n\n  constructor(@Inject(ALERT_CONFIG) private config: AlertConfig) {\n    this.initConfig();\n    this.dispatcher.pipe(scan(this.reducer, []))\n      .subscribe((state: Alert[]) => this.state.next(state));\n  }\n\n  private initConfig(): void {\n    if (!this.config) {\n      this.config = {};\n    }\n    this.config.timeout = !!this.config.timeout ? this.config.timeout : 5000;\n    this.config.maxMessages = !!this.config.maxMessages ? this.config.maxMessages : 5;\n  }\n\n  public get messages(): Observable<Alert[]> {\n    return this.state;\n  }\n\n  public info(msg: string): void {\n    this.addAlert({content: msg, type: 'info'});\n  }\n\n  public danger(msg: string): void {\n    this.addAlert({content: msg, type: 'danger'});\n  }\n\n  public success(msg: string): void {\n    this.addAlert({content: msg, type: 'success'});\n  }\n\n  public warning(msg: string): void {\n    this.addAlert({content: msg, type: 'warning'});\n  }\n\n  public close(alert: Alert): void {\n    this.dispatcher.next({type: 'DELETE', alert: alert, config: this.config});\n  }\n\n  private addAlert(alert: Alert): void {\n    this.dispatcher.next({type: 'ADD', alert: alert, config: this.config});\n\n    timer(this.config.timeout)\n      .pipe(take(1))\n      .subscribe(() => {\n        this.dispatcher.next({type: 'DELETE', alert: alert, config: this.config});\n      });\n  }\n\n  private reducer(state: Alert[], action: { type: 'ADD' | 'DELETE', alert: Alert, config: AlertConfig }): Alert[] {\n    if (action.type === 'ADD') {\n      const output = [\n        action.alert,\n        ...state\n      ];\n      if (output.length > action.config.maxMessages) {\n        output.pop();\n      }\n      return output;\n    } else if (action.type === 'DELETE') {\n      return state.filter(alert => alert !== action.alert);\n    }\n    return state;\n  }\n}\n"
  ],
  "names": [],
  "mappings": "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"
}
