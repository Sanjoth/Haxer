<div (click)="remOver()"></div>
<div class="container" style="text-align:center; position:relative;">
  <h2>
   <br> {{title}} <br>
  </h2>
  <img _ngcontent-c0="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg==" width="50">
</div>
<br>
<div style="text-align:center">
    Search: <input type="text" id="query" autocomplete="off" placeholder="Keywords" (keyup)="sendReq(query.value)" [(ngModel)]="texts" name="query" #query>
</div>
<div *ngIf="data">
      <div style="text-align:center"> 
          <p>You searched for ' <b>{{texts}}</b> ' </p>
          <h5>Search Details</h5>
        <table> 
          <tr>
            <th>Page </th>
            <th>Total Results</th>
            <th>Total Pages</th>
            <th>Results per page</th>
          </tr>
          <tr>
            <td>{{data.page}}</td>
            <td>{{data.total_results}}</td>
            <td>{{data.total_pages}}</td>
            <td>{{data.results.length}}</td>
          </tr>
        </table>  
       </div> 
      <div class="card-group">
  <mat-card class="example-card" *ngFor="let movie of data.results; let myIndex = index" (click)="trackClick(movie.id,movie.genre_ids)">
      <mat-card-header>
          <mat-card-title>
              <i class="fa fa-film fa-lg" aria-hidden="true"></i> <b> {{movie.title}} </b>
         </mat-card-title>
      </mat-card-header>
        <img mat-card-image src="https://image.tmdb.org/t/p/w300/{{movie.backdrop_path}}" onerror="this.onerror=null;this.src='/assets/nf.png'">
      <mat-card-content>
          <div class="d-flex justify-content-between">
              <div>
                  <i class="fa fa-calendar" aria-hidden="true"></i> {{movie.release_date}}
              </div>
              <div>
                  <i class="fa fa-imdb fa-lg" aria-hidden="true"></i> {{movie.vote_average}} 
              </div>
         </div>
          
      <i><span style="color: #666; font-size: 12px;" *ngFor="let item of movie.genre_ids;let i = index">{{this.gen[item]}}<span *ngIf="i < movie.genre_ids.length-1">,</span></span>.</i><br>
      <span *ngIf="movie.overview.length>140">{{movie.overview | truncate : 140 : true}} </span> 
      <span *ngIf="movie.overview.length<140">{{movie.overview}} </span><br> 

      <div class="d-flex justify-content-between">
          <div>
              <i class="fa fa-eye fa-lg" aria-hidden="true"></i> <span *ngIf="movie.adult; else templateName">Restricted</span><ng-template #templateName>
                  Unrestricted
              </ng-template>
          </div>
          <div>
              <i class="fa fa-language fa-lg" aria-hidden="true"></i> {{movie.original_language}}
          </div>
     </div>
      <i class="fa fa-rocket fa-lg" aria-hidden="true"></i>  {{movie.popularity}} <br> 
    </mat-card-content>  
    <mat-card-actions style="text-align: center">     
        <button mat-button><i class="fa fa-thumbs-o-up fa-lg" aria-hidden="true"></i></button>
        <button mat-button><i class="fa fa-thumbs-o-down fa-lg" aria-hidden="true"></i></button>
        <button mat-button><i class="fa fa-bookmark-o fa-lg" aria-hidden="true"></i></button>
      </mat-card-actions>   
  </mat-card>
  </div>
</div>

<br/> <br/>
  <!-- OLD CODE
  <b>Movie Details:</b><br>
  Movie id: {{data.results[0].id}}<br>
  Title: {{data.results[0].title}}<br>
  Genres: <ol><li *ngFor="let item of data.results[0].genre_ids">
    {{item }} </li> </ol> <br> 
  Language: {{data.results[0].original_language}}<br>
  IMDb Rating: {{data.results[0].vote_average}}<br>
  Vote Count: {{data.results[0].vote_count}}<br>
  Overview: {{data.results[0].overview}}<br>
  Popularity: {{data.results[0].popularity}}<br>
  Adult: {{data.results[0].adult}}<br>
  poster_path: {{data.results[0].poster_path}}<br>
  backdrop_path: {{data.results[0].id}}<br>
  <br><br>
  
  <b>Search Details:</b><br>
  page: {{data.page}}<br>
  total_results: {{data.total_results}}<br>
  total_pages: {{data.total_pages}}<br>
  results:{{data.results.length}}<br>

  -->
    <!-- OLD CODe

        
  <ol > 
    <li *ngFor="let movie of data.results; let myIndex = index" (click)="trackClick(movie.id,movie.genre_ids)" #yo> 
      <b> Movie ID: </b> {{movie.id}} <br>
      <b> Movie Title: </b> {{movie.title}} <br> 

      <b> Genres: </b><ol> <li *ngFor="let item of movie.genre_ids">
          {{item}} </li> </ol> 
    
      <b> Original Language: </b> {{movie.original_language}} <br>
      <b> IMDb Rating: </b> {{movie.vote_average}} <br>
      <b> Vote Count: </b> {{movie.vote_count}} <br> 
      <b> Movie Overview: </b> {{movie.overview}} <br> 
      <b> Popularity: </b> {{movie.popularity}} <br> 
      <b> Adult: </b> {{movie.adult}} <br>
      <b> Year: </b> {{movie.release_date}} <br>
    </li> 
  </ol>
</div>
-->

  